# FinanceFlo Redeploy & Verification Checklist (2025-11-22)

## 1. Environment Sync
- **Frontend (`ma-saas-platform`)**:
  - Run `FINANCEFLO_VITE_CLERK_PUBLISHABLE_KEY=pk_live_Y2xlcmsuZmluYW5jZWZsby5haSQ node scripts/update-render-predeploy.py`.
  - Confirm `VITE_CLERK_PUBLISHABLE_KEY`, `VITE_API_URL`, and `VITE_ENABLE_MASTER_ADMIN` match `.env-frontend.md`.
- **Backend (`ma-saas-backend`)**:
  - Update `CLERK_PUBLISHABLE_KEY`, `CLERK_SECRET_KEY`, and `CLERK_WEBHOOK_SECRET` via Render dashboard or API.
  - Ensure `CORS_ORIGINS` only includes FinanceFlo domains.

## 2. Render Deployments
1. Trigger frontend deploy (`npm run deploy:frontend` in CI or Render dashboard).
2. Trigger backend deploy. Watch logs for Clerk initialization and Alembic migrations.
3. After both complete, hit:
   - `https://financeflo.ai/` (marketing)
   - `https://ma-saas-backend.onrender.com/health` (API)

## 3. Clerk Webhook Re-Enabling
1. In the Clerk dashboard (`https://clerk.financeflo.ai`), open the disabled endpoint `https://ma-saas-backend.onrender.com/api/webhooks/clerk`.
2. Re-enable and send a sample `user.created` event.
3. Verify Render logs show successful signature validation.

## 4. QA Verification
- **Vitest (run locally)**: `npx vitest run src/pages/marketing/PricingPage.test.tsx ...` (see `docs/tests/2025-11-22-vitest.txt`).
- **Playwright (next run)**: re-execute `npm run test:e2e` once FinanceFlo DNS is live.
- **Manual smoke**:
  - Check `/pricing`, `/pricing/platform`, `/pricing/community`, `/pricing/services`.
  - Execute sign-in/sign-up via FinanceFlo domain.

## 5. Documentation Updates
- Update README + deployment guides to reference `financeflo.ai`.
- Capture QA output in `docs/tests/2025-11-22-vitest.txt`.
- Archive this checklist in BMAD progress docs.

Following these steps keeps the production stack aligned with the new FinanceFlo brand and confirms Clerk/webhook health after redeploy.

