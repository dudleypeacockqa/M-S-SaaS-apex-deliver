# v1.1 Coverage Improvement Plan

**Date**: November 14, 2025  
**Current Coverage**: 85%  
**Target Coverage**: 90%+  
**Gap**: 5% (~600 lines)

---

## Priority Files (Lowest Coverage First)

### Critical (0% Coverage)
1. **app/services/s3_storage_service.py** (0%) - S3 storage implementation
2. **app/services/valuation_export_service.py** (0%) - Valuation export functionality

### High Priority (20-50% Coverage)
3. **app/services/sage_oauth_service.py** (21.4%) - Sage OAuth integration
4. **app/services/quickbooks_oauth_service.py** (21.5%) - QuickBooks OAuth integration
5. **app/services/document_export_service.py** (23.5%) - Document export service
6. **app/services/netsuite_oauth_service.py** (31.2%) - NetSuite OAuth integration
7. **app/services/document_ai_service.py** (47.4%) - Document AI processing

### Medium Priority (65-85% Coverage)
8. **app/services/xero_oauth_service.py** (65.5%) - Xero OAuth (some tests exist)
9. **app/services/youtube_service.py** (73.7%) - YouTube video upload
10. **app/api/routes/podcasts.py** (73.9%) - Podcast API routes
11. **app/api/routes/documents.py** (75.5%) - Document API routes
12. **app/services/event_payment_service.py** (77.2%) - Event payment processing
13. **app/api/routes/marketing.py** (78.3%) - Marketing API routes
14. **app/services/storage_service.py** (78.5%) - Storage service
15. **app/api/routes/events.py** (78.9%) - Events API routes
16. **app/services/audio_chunking_service.py** (79.4%) - Audio chunking
17. **app/services/document_service.py** (79.5%) - Document service
18. **app/api/routes/valuation.py** (79.8%) - Valuation API routes
19. **app/api/routes/document_generation.py** (80.4%) - Document generation routes
20. **app/services/deal_service.py** (81.5%) - Deal service
21. **app/services/event_service.py** (83.4%) - Event service
22. **app/api/routes/deals.py** (84.4%) - Deals API routes
23. **app/services/subscription_service.py** (84.5%) - Subscription service
24. **app/services/thumbnail_service.py** (84.9%) - Thumbnail generation
25. **app/services/event_notification_service.py** (86.3%) - Event notifications

---

## Strategy

### Phase 1: Critical Files (0% Coverage)
- Add comprehensive tests for S3 storage service
- Add tests for valuation export service

### Phase 2: High Priority (20-50%)
- Add tests for OAuth services (Sage, QuickBooks, NetSuite)
- Add tests for document export and AI services

### Phase 3: Medium Priority (65-85%)
- Add edge case tests
- Add error path tests
- Add integration tests

---

## Estimated Impact

- **Critical files** (0%): ~200 lines → 90%+ coverage
- **High priority** (20-50%): ~300 lines → 90%+ coverage
- **Medium priority** (65-85%): ~100 lines → 90%+ coverage

**Total**: ~600 lines of new test coverage needed

---

**Last Updated**: November 14, 2025

