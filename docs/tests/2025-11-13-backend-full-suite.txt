============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-7.4.3, pluggy-1.6.0 -- C:\Users\User\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver
configfile: pytest.ini
plugins: anyio-3.7.1, asyncio-0.21.1, cov-7.0.0
asyncio: mode=Mode.STRICT
collecting ... collected 891 items

tests\test_additional_ratios.py::test_asset_turnover PASSED              [  0%]
tests\test_additional_ratios.py::test_inventory_turnover PASSED          [  0%]
tests\test_additional_ratios.py::test_receivables_turnover PASSED        [  0%]
tests\test_additional_ratios.py::test_days_sales_outstanding PASSED      [  0%]
tests\test_additional_ratios.py::test_cash_conversion_cycle PASSED       [  0%]
tests\test_additional_ratios.py::test_price_to_earnings PASSED           [  0%]
tests\test_additional_ratios.py::test_ev_to_ebitda PASSED                [  0%]
tests\test_additional_ratios.py::test_dividend_yield PASSED              [  0%]
tests\test_additional_ratios.py::test_revenue_growth_yoy PASSED          [  1%]
tests\test_additional_ratios.py::test_ebitda_growth_yoy PASSED           [  1%]
tests\test_additional_ratios.py::test_cagr PASSED                        [  1%]
tests\test_additional_ratios.py::test_operating_cf_margin PASSED         [  1%]
tests\test_additional_ratios.py::test_free_cash_flow PASSED              [  1%]
tests\test_additional_ratios.py::test_cf_to_debt PASSED                  [  1%]
tests\test_additional_ratios.py::test_cash_conversion_rate PASSED        [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_professional_tier_allowed_podcast_audio_access PASSED [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_starter_tier_blocked_from_podcast_audio PASSED [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_403_response_includes_upgrade_message PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_403_includes_required_tier_header PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_403_includes_upgrade_url_header PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureVideoAccess::test_premium_tier_allowed_video_access PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureVideoAccess::test_professional_tier_blocked_from_video PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureYouTubeAccess::test_premium_tier_allowed_youtube_access PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureYouTubeAccess::test_professional_tier_blocked_from_youtube PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureLiveStreaming::test_enterprise_tier_allowed_live_streaming PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureLiveStreaming::test_premium_tier_blocked_from_live_streaming PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_middleware_works_with_multiple_features PASSED [  3%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_middleware_integrates_with_get_current_user PASSED [  3%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_middleware_logs_blocked_requests PASSED [  3%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_invalid_feature_raises_feature_not_found_error PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceInitialization::test_service_initializes_with_default_settings PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceInitialization::test_service_initializes_with_custom_settings PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceFileValidation::test_needs_chunking_returns_false_for_small_file PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceFileValidation::test_needs_chunking_returns_true_for_large_file PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceFileValidation::test_needs_chunking_returns_false_at_exact_limit PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_creates_multiple_chunks PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_handles_mp3_format PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_handles_wav_format PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_applies_overlap PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_raises_error_for_missing_file PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_combines_all_transcripts PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_handles_empty_chunk_list PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_raises_error_on_api_failure PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_supports_custom_language PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceCleanup::test_cleanup_chunks_deletes_all_files PASSED [  5%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceCleanup::test_cleanup_chunks_handles_missing_files PASSED [  5%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceCleanup::test_cleanup_chunks_handles_deletion_errors PASSED [  5%]
tests\test_auth_helpers.py::test_extract_claim_with_single_key PASSED    [  5%]
tests\test_auth_helpers.py::test_extract_claim_with_multiple_keys_returns_first_found PASSED [  5%]
tests\test_auth_helpers.py::test_extract_claim_returns_none_when_not_found PASSED [  5%]
tests\test_auth_helpers.py::test_extract_claim_skips_empty_values PASSED [  5%]
tests\test_auth_helpers.py::test_extract_claim_handles_falsy_but_valid_values PASSED [  5%]
tests\test_auth_helpers.py::test_sanitize_claims_filters_allowed_keys PASSED [  5%]
tests\test_auth_helpers.py::test_sanitize_claims_handles_missing_allowed_keys PASSED [  6%]
tests\test_auth_helpers.py::test_sanitize_claims_returns_empty_dict_for_no_allowed_keys PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_validates_org_match PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_org_mismatch PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_missing_org_claim_when_user_has_org PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_creates_missing_org_from_clerk PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_validates_role_match PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_role_mismatch PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_unknown_role_claim PASSED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_logs_claim_mismatches PASSED [  7%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_allows_missing_role_claim PASSED [  7%]
tests\test_auth_helpers.py::test_get_current_user_enforces_claim_integrity PASSED [  7%]
tests\test_auth_helpers.py::test_get_current_user_requires_credentials PASSED [  7%]
tests\test_auth_helpers.py::test_require_feature_allows_access_with_sufficient_tier PASSED [  7%]
tests\test_auth_helpers.py::test_require_feature_blocks_access_with_insufficient_tier PASSED [  7%]
tests\test_billing_endpoints.py::test_create_checkout_session_success PASSED [  7%]
tests\test_billing_endpoints.py::test_create_checkout_session_invalid_tier PASSED [  7%]
tests\test_billing_endpoints.py::test_create_checkout_session_requires_auth PASSED [  7%]
tests\test_billing_endpoints.py::test_create_checkout_session_existing_subscription PASSED [  8%]
tests\test_billing_endpoints.py::test_create_checkout_session_with_trial PASSED [  8%]
tests\test_billing_endpoints.py::test_get_customer_portal_success PASSED [  8%]
tests\test_billing_endpoints.py::test_get_customer_portal_handles_value_errors PASSED [  8%]
tests\test_billing_endpoints.py::test_get_subscription_success PASSED    [  8%]
tests\test_billing_endpoints.py::test_get_subscription_not_found PASSED  [  8%]
tests\test_billing_endpoints.py::test_get_subscription_requires_auth PASSED [  8%]
tests\test_billing_endpoints.py::test_update_subscription_tier_upgrade PASSED [  8%]
tests\test_billing_endpoints.py::test_update_subscription_tier_downgrade PASSED [  8%]
tests\test_billing_endpoints.py::test_cancel_subscription_at_period_end PASSED [  9%]
tests\test_billing_endpoints.py::test_cancel_subscription_immediately PASSED [  9%]
tests\test_billing_endpoints.py::test_cancel_subscription_requires_active_subscription PASSED [  9%]
tests\test_billing_endpoints.py::test_customer_portal_redirect PASSED    [  9%]
tests\test_billing_simple.py::test_create_checkout_session_endpoint_exists PASSED [  9%]
tests\test_billing_simple.py::test_get_subscription_endpoint_exists PASSED [  9%]
tests\test_billing_simple.py::test_cancel_subscription_endpoint_exists PASSED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_creates_user PASSED      [  9%]
tests\test_clerk_auth_complete.py::test_webhook_rejects_invalid_signature PASSED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_rejects_missing_signature PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_updates_existing_user PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_update_creates_if_not_exists PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_soft_deletes_user PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_updates_last_login_on_session_created PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_handles_session_ended PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_handles_missing_email_addresses PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_upserts_organization_metadata PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_creates_organization_when_missing PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_deactivates_organization_on_delete PASSED [ 11%]
tests\test_clerk_auth_complete.py::test_webhook_handles_invalid_role_gracefully PASSED [ 11%]
tests\test_clerk_auth_complete.py::test_auth_me_returns_current_user PASSED [ 11%]
tests\test_clerk_auth_complete.py::test_auth_me_requires_token PASSED    [ 11%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_invalid_token PASSED [ 11%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_token_for_nonexistent_user PASSED [ 11%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_token_without_sub PASSED [ 11%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_org_claim_mismatch PASSED [ 11%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_role_claim_mismatch PASSED [ 12%]
tests\test_clerk_auth_complete.py::test_auth_me_populates_missing_org_from_claim PASSED [ 12%]
tests\test_clerk_auth_complete.py::test_webhook_handles_empty_data_gracefully PASSED [ 12%]
tests\test_clerk_auth_complete.py::test_webhook_ignores_unknown_event_types PASSED [ 12%]
tests\test_clerk_auth_complete.py::test_user_creation_with_all_roles PASSED [ 12%]
tests\test_clerk_auth_complete.py::test_webhook_handles_invalid_timestamp_format PASSED [ 12%]
tests\test_clerk_auth_complete.py::test_full_user_lifecycle PASSED       [ 12%]
tests\test_database_reset.py::test_reset_metadata_restores_dropped_tables PASSED [ 12%]
tests\test_database_reset.py::test_safe_drop_schema_handles_drop_all_errors PASSED [ 12%]
tests\test_deal_endpoints.py::test_create_deal_success PASSED            [ 13%]
tests\test_deal_endpoints.py::test_create_deal_validation_errors PASSED  [ 13%]
tests\test_deal_endpoints.py::test_create_deal_sets_owner_and_org PASSED [ 13%]
tests\test_deal_endpoints.py::test_create_deal_requires_auth PASSED      [ 13%]
tests\test_deal_endpoints.py::test_create_deal_default_stage PASSED      [ 13%]
tests\test_deal_endpoints.py::test_list_deals_returns_org_deals_only PASSED [ 13%]
tests\test_deal_endpoints.py::test_list_deals_pagination_works PASSED    [ 13%]
tests\test_deal_endpoints.py::test_list_deals_filter_by_stage PASSED     [ 13%]
tests\test_deal_endpoints.py::test_list_deals_search_by_name PASSED      [ 13%]
tests\test_deal_endpoints.py::test_list_deals_sort_by_created_at PASSED  [ 14%]
tests\test_deal_endpoints.py::test_list_deals_excludes_archived PASSED   [ 14%]
tests\test_deal_endpoints.py::test_list_deals_requires_auth PASSED       [ 14%]
tests\test_deal_endpoints.py::test_get_deal_success PASSED               [ 14%]
tests\test_deal_endpoints.py::test_get_deal_not_found PASSED             [ 14%]
tests\test_deal_endpoints.py::test_get_deal_forbidden_other_org PASSED   [ 14%]
tests\test_deal_endpoints.py::test_get_deal_requires_auth PASSED         [ 14%]
tests\test_deal_endpoints.py::test_update_deal_success PASSED            [ 14%]
tests\test_deal_endpoints.py::test_update_deal_stage_change PASSED       [ 14%]
tests\test_deal_endpoints.py::test_update_deal_partial_update PASSED     [ 15%]
tests\test_deal_endpoints.py::test_update_deal_forbidden_other_org PASSED [ 15%]
tests\test_deal_endpoints.py::test_update_deal_validation_errors PASSED  [ 15%]
tests\test_deal_endpoints.py::test_archive_deal_success PASSED           [ 15%]
tests\test_deal_endpoints.py::test_archive_deal_forbidden_other_org PASSED [ 15%]
tests\test_deal_endpoints.py::test_unarchive_deal_success PASSED         [ 15%]
tests\test_deal_endpoints.py::test_unarchive_deal_forbidden_other_org PASSED [ 15%]
tests\test_deal_matching_api.py::TestDealMatchingCriteriaAPI::test_create_criteria_success PASSED [ 15%]
tests\test_deal_matching_api.py::TestDealMatchingCriteriaAPI::test_create_criteria_requires_auth PASSED [ 15%]
tests\test_deal_matching_api.py::TestDealMatchingCriteriaAPI::test_list_criteria PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_find_matches_for_deal PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_find_matches_requires_auth PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_list_matches_for_deal PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_list_matches_requires_auth PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_list_matches_deal_not_found PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_find_matches_deal_not_found PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_view PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_save PASSED [ 16%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_pass PASSED [ 17%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_request_intro PASSED [ 17%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_requires_auth PASSED [ 17%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_match_not_found PASSED [ 17%]
tests\test_deal_matching_api.py::TestDealMatchingIntegration::test_create_criteria_and_find_matches_workflow PASSED [ 17%]
tests\test_deal_matching_models.py::TestDealMatchCriteriaModel::test_create_deal_match_criteria_with_required_fields PASSED [ 17%]
tests\test_deal_matching_models.py::TestDealMatchCriteriaModel::test_create_criteria_with_optional_fields PASSED [ 17%]
tests\test_deal_matching_models.py::TestDealMatchCriteriaModel::test_criteria_enforces_organization_isolation PASSED [ 17%]
tests\test_deal_matching_models.py::TestDealMatchModel::test_create_deal_match PASSED [ 17%]
tests\test_deal_matching_models.py::TestDealMatchModel::test_match_score_validation PASSED [ 18%]
tests\test_deal_matching_models.py::TestDealMatchModel::test_match_status_tracking PASSED [ 18%]
tests\test_deal_matching_models.py::TestDealMatchActionModel::test_create_match_action PASSED [ 18%]
tests\test_deal_matching_models.py::TestDealMatchActionModel::test_track_multiple_actions_on_match PASSED [ 18%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_industry_match_exact PASSED [ 18%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_industry_match_partial PASSED [ 18%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_industry_match_none PASSED [ 18%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_size_match_within_range PASSED [ 18%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_size_match_outside_range PASSED [ 18%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_geography_match_exact PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_geography_match_none PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_semantic_similarity PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_weighted_score PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_determine_confidence_level_high PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_determine_confidence_level_medium PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_determine_confidence_level_low PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_find_matches_returns_ranked_results PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_find_matches_filters_low_scores PASSED [ 19%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_match_result_contains_explanation PASSED [ 20%]
tests\test_document_endpoints.py::test_create_folder_success PASSED      [ 20%]
tests\test_document_endpoints.py::test_upload_document_success PASSED    [ 20%]
tests\test_document_endpoints.py::test_upload_document_rejects_large_files PASSED [ 20%]
tests\test_document_endpoints.py::test_list_documents_filters_by_folder PASSED [ 20%]
tests\test_document_endpoints.py::test_download_document_records_access_log PASSED [ 20%]
tests\test_document_endpoints.py::test_set_document_permission PASSED    [ 20%]
tests\test_document_endpoints.py::test_list_folders_lazy_loading PASSED  [ 20%]
tests\test_document_endpoints.py::test_list_folders_supports_search PASSED [ 20%]
tests\test_document_endpoints.py::test_create_nested_folder PASSED       [ 21%]
tests\test_document_endpoints.py::test_rename_folder PASSED              [ 21%]
tests\test_document_endpoints.py::test_delete_empty_folder PASSED        [ 21%]
tests\test_document_endpoints.py::test_delete_non_empty_folder_fails PASSED [ 21%]
tests\test_document_endpoints.py::test_folder_requires_authentication PASSED [ 21%]
tests\test_document_endpoints.py::test_folder_organization_isolation PASSED [ 21%]
tests\test_document_endpoints.py::test_upload_multiple_documents PASSED  [ 21%]
tests\test_document_endpoints.py::test_upload_unsupported_file_type PASSED [ 21%]
tests\test_document_endpoints.py::test_upload_creates_audit_log PASSED   [ 21%]
tests\test_document_endpoints.py::test_search_documents_by_filename PASSED [ 22%]
tests\test_document_endpoints.py::test_filter_documents_by_file_type PASSED [ 22%]
tests\test_document_endpoints.py::test_upload_same_name_creates_new_version PASSED [ 22%]
tests\test_document_endpoints.py::test_list_document_versions PASSED     [ 22%]
tests\test_document_endpoints.py::test_download_specific_version PASSED  [ 22%]
tests\test_document_endpoints.py::test_restore_previous_version PASSED   [ 22%]
tests\test_document_endpoints.py::test_max_versions_enforced PASSED      [ 22%]
tests\test_document_endpoints.py::test_delete_document_archives_all_versions PASSED [ 22%]
tests\test_document_endpoints.py::test_viewer_cannot_delete_document PASSED [ 23%]
tests\test_document_endpoints.py::test_viewer_can_download_document PASSED [ 23%]
tests\test_document_endpoints.py::test_editor_can_upload_with_folder_permission PASSED [ 23%]
tests\test_document_endpoints.py::test_granting_folder_permission_creates_audit_log PASSED [ 23%]
tests\test_document_endpoints.py::test_revoking_folder_permission_creates_audit_log PASSED [ 23%]
tests\test_document_endpoints.py::test_revoking_document_permission_creates_audit_log PASSED [ 23%]
tests\test_document_endpoints.py::test_editor_cannot_delete_others_document PASSED [ 23%]
tests\test_document_endpoints.py::test_editor_can_delete_own_document PASSED [ 23%]
tests\test_document_endpoints.py::test_delete_document_requires_editor_permission PASSED [ 23%]
tests\test_document_endpoints.py::test_delete_document_records_audit_log PASSED [ 24%]
tests\test_document_endpoints.py::test_access_logs_include_user_name PASSED [ 24%]
tests\test_document_endpoints.py::test_bulk_download_documents PASSED    [ 24%]
tests\test_document_endpoints.py::test_bulk_download_requires_permission PASSED [ 24%]
tests\test_document_endpoints.py::test_bulk_delete_documents PASSED      [ 24%]
tests\test_document_endpoints.py::test_bulk_delete_requires_owner_permission PASSED [ 24%]
tests\test_document_endpoints.py::test_bulk_delete_partial_failure PASSED [ 24%]
tests\test_document_endpoints.py::test_document_question_workflow PASSED [ 24%]
tests\test_document_service.py::test_trim_document_versions_keeps_latest_twenty PASSED [ 24%]
tests\test_document_service.py::test_trim_document_versions_noop_when_within_limit PASSED [ 25%]
tests\test_document_service.py::test_bulk_download_documents_logs_access PASSED [ 25%]
tests\test_document_service.py::test_bulk_download_documents_requires_viewer_permission PASSED [ 25%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_has_audio_podcast_access PASSED [ 25%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_starter_no_audio_podcast_access PASSED [ 25%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_no_video_podcast_access PASSED [ 25%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_premium_has_video_podcast_access PASSED [ 25%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_premium_has_youtube_integration PASSED [ 25%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_no_youtube_integration PASSED [ 25%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_enterprise_has_live_streaming PASSED [ 26%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_premium_no_live_streaming PASSED [ 26%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_enterprise_has_multi_language_transcription PASSED [ 26%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_has_basic_transcription PASSED [ 26%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_no_ai_enhanced_transcription PASSED [ 26%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_raises_feature_not_found_for_invalid_feature PASSED [ 26%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_all_tiers_have_core_features PASSED [ 26%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_starter_tier_features PASSED [ 26%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_professional_tier_features PASSED [ 26%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_premium_tier_features PASSED [ 27%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_enterprise_tier_features PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-podcast_audio-False] PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-podcast_video-False] PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-youtube_integration-False] PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-live_streaming-False] PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-deal_management-True] PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-podcast_audio-True] PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-podcast_video-False] PASSED [ 27%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-youtube_integration-False] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-live_streaming-False] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-transcription_basic-True] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-transcription_ai_enhanced-False] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-podcast_audio-True] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-podcast_video-True] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-youtube_integration-True] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-live_streaming-False] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-transcription_basic-True] PASSED [ 28%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-transcription_ai_enhanced-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-transcription_multi_language-False] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-podcast_audio-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-podcast_video-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-youtube_integration-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-live_streaming-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-transcription_basic-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-transcription_ai_enhanced-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-transcription_multi_language-True] PASSED [ 29%]
tests\test_entitlement.py::TestFeatureNotFoundError::test_feature_not_found_error_message PASSED [ 30%]
tests\test_financial_api.py::test_calculate_financial_ratios_endpoint PASSED [ 30%]
tests\test_financial_api.py::test_calculate_ratios_requires_authentication PASSED [ 30%]
tests\test_financial_api.py::test_calculate_ratios_deal_not_found PASSED [ 30%]
tests\test_financial_api.py::test_calculate_ratios_with_partial_data PASSED [ 30%]
tests\test_financial_api.py::test_get_financial_connections_endpoint_returns_empty_list_when_no_connections PASSED [ 30%]
tests\test_financial_api.py::test_get_financial_connections_endpoint_returns_connections PASSED [ 30%]
tests\test_financial_api.py::test_get_financial_ratios_not_found PASSED  [ 30%]
tests\test_financial_api.py::test_get_financial_narrative_not_found PASSED [ 30%]
tests\test_financial_api.py::test_connect_xero_initiates_oauth_flow PASSED [ 31%]
tests\test_financial_api.py::test_connect_xero_with_invalid_deal PASSED  [ 31%]
tests\test_financial_api.py::test_xero_oauth_callback_success PASSED     [ 31%]
tests\test_financial_api.py::test_xero_oauth_callback_missing_code PASSED [ 31%]
tests\test_financial_api.py::test_sync_financial_data_success PASSED     [ 31%]
tests\test_financial_api.py::test_sync_financial_data_no_connection PASSED [ 31%]
tests\test_financial_api.py::test_connect_quickbooks_initiates_oauth_flow PASSED [ 31%]
tests\test_financial_api.py::test_connect_quickbooks_with_invalid_deal PASSED [ 31%]
tests\test_financial_api.py::test_quickbooks_oauth_callback_success PASSED [ 31%]
tests\test_financial_api.py::test_quickbooks_oauth_callback_missing_params PASSED [ 32%]
tests\test_financial_api.py::test_sync_quickbooks_financial_data_success PASSED [ 32%]
tests\test_financial_api.py::test_sync_quickbooks_financial_data_no_connection PASSED [ 32%]
tests\test_financial_api.py::test_quickbooks_connection_status PASSED    [ 32%]
tests\test_financial_api.py::test_disconnect_quickbooks_connection PASSED [ 32%]
tests\test_financial_api.py::test_connect_netsuite_initiates_oauth_flow PASSED [ 32%]
tests\test_financial_api.py::test_connect_netsuite_with_invalid_deal PASSED [ 32%]
tests\test_financial_api.py::test_netsuite_oauth_callback_success PASSED [ 32%]
tests\test_financial_api.py::test_sync_netsuite_financial_data_success PASSED [ 32%]
tests\test_financial_api.py::test_sync_netsuite_financial_data_no_connection PASSED [ 33%]
tests\test_financial_api.py::test_connect_sage_initiates_oauth_flow FAILED [ 33%]

================================== FAILURES ===================================
___________________ test_connect_sage_initiates_oauth_flow ____________________

client = <starlette.testclient.TestClient object at 0x00000270761CF610>
test_deal = Deal(id=test-deal-id, name='Test M&A Deal', stage='due_diligence')
solo_user = User(id=test-solo-user-id, clerk_user_id='test_clerk_solo_user')

    def test_connect_sage_initiates_oauth_flow(client, test_deal, solo_user):
        """Sage connection should return an authorization URL."""
        app.dependency_overrides[get_current_user] = lambda: solo_user
    
        try:
>           with patch('app.api.routes.financial.initiate_sage_oauth') as mock_initiate:

tests\test_financial_api.py:682: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\User\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1446: in __enter__
    original, local = self.get_original()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <unittest.mock._patch object at 0x00000270002AEED0>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <module 'app.api.routes.financial' from 'C:\\Projects\\ma-saas-platform\\M-S-SaaS-apex-deliver\\backend\\app\\api\\routes\\financial.py'> does not have the attribute 'initiate_sage_oauth'

C:\Users\User\AppData\Local\Programs\Python\Python311\Lib\unittest\mock.py:1419: AttributeError
============================== warnings summary ===============================
tests\test_netsuite_integration.py:30
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:30: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:42
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:42: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:59
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:59: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:97
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:97: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:114
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:114: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:132
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:132: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:153
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:153: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:209
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:209: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:229
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:229: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_netsuite_integration.py:249
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_netsuite_integration.py:249: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:29
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:29: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:49
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:49: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:66
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:66: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:104
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:104: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:121
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:121: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:143
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:143: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:164
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:164: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:219
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:219: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_quickbooks_integration.py:238
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_quickbooks_integration.py:238: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:28
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:28: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:40
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:40: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:57
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:57: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:95
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:95: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:112
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:112: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:130
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:130: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:151
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:151: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:206
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:206: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_sage_integration.py:226
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_sage_integration.py:226: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:30
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:30: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:47
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:47: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:63
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:63: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:104
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:104: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:136
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:136: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:153
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:153: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:175
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:175: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:196
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:196: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests\test_xero_integration.py:284
  C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver\backend\tests\test_xero_integration.py:284: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

backend/tests/test_billing_endpoints.py: 16 warnings
backend/tests/test_billing_simple.py: 3 warnings
backend/tests/test_clerk_auth_complete.py: 26 warnings
backend/tests/test_deal_endpoints.py: 25 warnings
backend/tests/test_deal_matching_api.py: 16 warnings
backend/tests/test_document_endpoints.py: 42 warnings
backend/tests/test_financial_api.py: 28 warnings
  C:\Users\User\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_client.py:680: DeprecationWarning: The 'app' shortcut is now deprecated. Use the explicit style 'transport=WSGITransport(app=...)' instead.
    warnings.warn(message, DeprecationWarning)

backend/tests/test_clerk_auth_complete.py: 24 warnings
  C:\Users\User\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_content.py:202: DeprecationWarning: Use 'content=<...>' to upload raw bytes/text content.
    warnings.warn(message, DeprecationWarning)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests\test_financial_api.py::test_connect_sage_initiates_oauth_flow - ...
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
=========== 1 failed, 295 passed, 217 warnings in 68.88s (0:01:08) ============
