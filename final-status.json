[{"deploy":{"id":"dep-d4929fre5dus73e8vrtg","commit":{"id":"01d4814f5fe5dbe6e3e64d81af10e667f5c2a7a0","message":"fix(auth): auto-create organization from Clerk claim if missing\n\nWhen a user has an organization claim from Clerk but no corresponding\norganization record in the database, automatically create the organization\nrecord to prevent authentication failures.\n\nThis handles the edge case where Clerk creates the organization first\n(via webhook or direct API call) before the user authenticates.\n\n**Changes**:\n- Auto-populate missing organization_id from trusted Clerk claim\n- Create Organization record if it doesn't exist in database\n- Set default values (name, slug, starter tier) that will be updated by webhooks\n\n**Rationale**:\n- Prevents 403 errors when organization exists in Clerk but not in DB\n- Maintains claim integrity while handling async webhook timing issues\n- Follows fail-safe pattern for multi-tenant authentication\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude \u003cnoreply@anthropic.com\u003e","createdAt":"2025-11-10T17:45:27Z"},"status":"update_failed","trigger":"new_commit","createdAt":"2025-11-10T17:45:38.13898Z","updatedAt":"2025-11-10T17:46:47.344052Z","startedAt":"2025-11-10T17:45:38.078065Z","finishedAt":"2025-11-10T17:46:47.343214Z"},"cursor":"YxNK5RilfBY5ZnJlNWR1czczZTh2cnRn"}]
