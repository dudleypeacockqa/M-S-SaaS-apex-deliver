[{"deploy":{"id":"dep-d48vt3adbo4c73fm6svg","commit":{"id":"87072042fb77b0511ffcfa9fb91c58d5ae5194a7","message":"fix(migrations): merge branching migrations and add missing model imports\n\nFixed critical deployment blocker that caused 3 consecutive Render failures.\n\n**Root Cause:**\nTwo migrations were created with the same parent (c3a7b4bbf913), creating\na branching conflict:\n- dc2c0f69c1b1 (pipeline templates)\n- 1a11396903e4 (user FK type fix)\n\nAlembic could not run `upgrade head` with multiple heads, causing all\ndeployments to fail with \"Multiple heads detected\" error.\n\n**Fix #1: Merge Migration** âœ…\n- Created: c80cbaa32b50_merge_pipeline_templates_and_user_fk_.py\n- Resolves branching conflict by merging both migration branches\n- New head: c80cbaa32b50\n- Verified: `alembic heads` now shows single head\n\n**Fix #2: Model Imports in env.py** âœ…\n- Added RBACAuditLog import (from app.models.rbac_audit_log)\n- Added PipelineTemplate, PipelineTemplateStage imports\n- Ensures Alembic can detect all models for autogeneration\n\n**Files Changed:**\n- backend/alembic/versions/c80cbaa32b50_merge_pipeline_templates_and_user_fk_.py (new)\n- backend/alembic/env.py (added 2 import lines)\n\n**Testing:**\n- Local verification: `alembic heads` shows single head âœ…\n- Migration chain validated âœ…\n\n**Impact:**\n- Unblocks Render deployments (3 failed â†’ should now succeed)\n- Enables both pipeline template and user FK fix migrations to coexist\n- Prevents future autogeneration issues with new models\n\n**Next Deploy:**\nRender will run `alembic upgrade head` successfully and reach c80cbaa32b50.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude \u003cnoreply@anthropic.com\u003e","createdAt":"2025-11-10T15:02:33Z"},"status":"update_failed","trigger":"new_commit","createdAt":"2025-11-10T15:02:42.955381Z","updatedAt":"2025-11-10T15:05:13.533313Z","startedAt":"2025-11-10T15:02:41.516427Z","finishedAt":"2025-11-10T15:05:13.532135Z"},"cursor":"8s24w9YvuOB0M2FkYm80YzczZm02c3Zn"}]
