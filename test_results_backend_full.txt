============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-7.4.3, pluggy-1.6.0 -- C:\Users\User\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: C:\Projects\ma-saas-platform\M-S-SaaS-apex-deliver
configfile: pytest.ini
plugins: anyio-3.7.1, asyncio-0.21.1, cov-7.0.0
asyncio: mode=Mode.STRICT
collecting ... collected 1027 items

tests\test_additional_ratios.py::test_asset_turnover PASSED              [  0%]
tests\test_additional_ratios.py::test_inventory_turnover PASSED          [  0%]
tests\test_additional_ratios.py::test_receivables_turnover PASSED        [  0%]
tests\test_additional_ratios.py::test_days_sales_outstanding PASSED      [  0%]
tests\test_additional_ratios.py::test_cash_conversion_cycle PASSED       [  0%]
tests\test_additional_ratios.py::test_price_to_earnings PASSED           [  0%]
tests\test_additional_ratios.py::test_ev_to_ebitda PASSED                [  0%]
tests\test_additional_ratios.py::test_dividend_yield PASSED              [  0%]
tests\test_additional_ratios.py::test_revenue_growth_yoy PASSED          [  0%]
tests\test_additional_ratios.py::test_ebitda_growth_yoy PASSED           [  0%]
tests\test_additional_ratios.py::test_cagr PASSED                        [  1%]
tests\test_additional_ratios.py::test_operating_cf_margin PASSED         [  1%]
tests\test_additional_ratios.py::test_free_cash_flow PASSED              [  1%]
tests\test_additional_ratios.py::test_cf_to_debt PASSED                  [  1%]
tests\test_additional_ratios.py::test_cash_conversion_rate PASSED        [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_professional_tier_allowed_podcast_audio_access PASSED [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_starter_tier_blocked_from_podcast_audio PASSED [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_403_response_includes_upgrade_message PASSED [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_403_includes_required_tier_header PASSED [  1%]
tests\test_api_middleware.py::TestRequireFeatureProfessionalTier::test_403_includes_upgrade_url_header PASSED [  1%]
tests\test_api_middleware.py::TestRequireFeatureVideoAccess::test_premium_tier_allowed_video_access PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureVideoAccess::test_professional_tier_blocked_from_video PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureYouTubeAccess::test_premium_tier_allowed_youtube_access PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureYouTubeAccess::test_professional_tier_blocked_from_youtube PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureLiveStreaming::test_enterprise_tier_allowed_live_streaming PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureLiveStreaming::test_premium_tier_blocked_from_live_streaming PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_middleware_works_with_multiple_features PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_middleware_integrates_with_get_current_user PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_middleware_logs_blocked_requests PASSED [  2%]
tests\test_api_middleware.py::TestRequireFeatureEdgeCases::test_invalid_feature_raises_feature_not_found_error PASSED [  2%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceInitialization::test_service_initializes_with_default_settings PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceInitialization::test_service_initializes_with_custom_settings PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceFileValidation::test_needs_chunking_returns_false_for_small_file PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceFileValidation::test_needs_chunking_returns_true_for_large_file PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceFileValidation::test_needs_chunking_returns_false_at_exact_limit PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_creates_multiple_chunks PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_handles_mp3_format PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_handles_wav_format PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_applies_overlap PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceChunking::test_chunk_audio_file_raises_error_for_missing_file PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_combines_all_transcripts PASSED [  3%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_handles_empty_chunk_list PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_raises_error_on_api_failure PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceTranscription::test_transcribe_chunks_supports_custom_language PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceCleanup::test_cleanup_chunks_deletes_all_files PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceCleanup::test_cleanup_chunks_handles_missing_files PASSED [  4%]
tests\test_audio_chunking_service.py::TestAudioChunkingServiceCleanup::test_cleanup_chunks_handles_deletion_errors PASSED [  4%]
tests\test_auth_helpers.py::test_extract_claim_with_single_key PASSED    [  4%]
tests\test_auth_helpers.py::test_extract_claim_with_multiple_keys_returns_first_found PASSED [  4%]
tests\test_auth_helpers.py::test_extract_claim_returns_none_when_not_found PASSED [  4%]
tests\test_auth_helpers.py::test_extract_claim_skips_empty_values PASSED [  4%]
tests\test_auth_helpers.py::test_extract_claim_handles_falsy_but_valid_values PASSED [  5%]
tests\test_auth_helpers.py::test_sanitize_claims_filters_allowed_keys PASSED [  5%]
tests\test_auth_helpers.py::test_sanitize_claims_handles_missing_allowed_keys PASSED [  5%]
tests\test_auth_helpers.py::test_sanitize_claims_returns_empty_dict_for_no_allowed_keys PASSED [  5%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_validates_org_match FAILED [  5%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_org_mismatch FAILED [  5%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_missing_org_claim_when_user_has_org FAILED [  5%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_creates_missing_org_from_clerk FAILED [  5%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_validates_role_match FAILED [  5%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_role_mismatch FAILED [  5%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_rejects_unknown_role_claim FAILED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_logs_claim_mismatches FAILED [  6%]
tests\test_auth_helpers.py::test_enforce_claim_integrity_allows_missing_role_claim FAILED [  6%]
tests\test_auth_helpers.py::test_get_current_user_enforces_claim_integrity FAILED [  6%]
tests\test_auth_helpers.py::test_get_current_user_requires_credentials PASSED [  6%]
tests\test_auth_helpers.py::test_require_feature_allows_access_with_sufficient_tier FAILED [  6%]
tests\test_auth_helpers.py::test_require_feature_blocks_access_with_insufficient_tier FAILED [  6%]
tests\test_billing_endpoints.py::test_create_checkout_session_success FAILED [  6%]
tests\test_billing_endpoints.py::test_create_checkout_session_invalid_tier ERROR [  6%]
tests\test_billing_endpoints.py::test_create_checkout_session_requires_auth PASSED [  6%]
tests\test_billing_endpoints.py::test_create_checkout_session_existing_subscription FAILED [  7%]
tests\test_billing_endpoints.py::test_create_checkout_session_with_trial FAILED [  7%]
tests\test_billing_endpoints.py::test_get_customer_portal_success FAILED [  7%]
tests\test_billing_endpoints.py::test_get_customer_portal_handles_value_errors FAILED [  7%]
tests\test_billing_endpoints.py::test_get_subscription_success FAILED    [  7%]
tests\test_billing_endpoints.py::test_get_subscription_not_found ERROR   [  7%]
tests\test_billing_endpoints.py::test_get_subscription_requires_auth PASSED [  7%]
tests\test_billing_endpoints.py::test_update_subscription_tier_upgrade FAILED [  7%]
tests\test_billing_endpoints.py::test_update_subscription_tier_downgrade FAILED [  7%]
tests\test_billing_endpoints.py::test_cancel_subscription_at_period_end FAILED [  7%]
tests\test_billing_endpoints.py::test_cancel_subscription_immediately FAILED [  7%]
tests\test_billing_endpoints.py::test_cancel_subscription_requires_active_subscription ERROR [  8%]
tests\test_billing_endpoints.py::test_customer_portal_redirect ERROR     [  8%]
tests\test_billing_simple.py::test_create_checkout_session_endpoint_exists PASSED [  8%]
tests\test_billing_simple.py::test_get_subscription_endpoint_exists PASSED [  8%]
tests\test_billing_simple.py::test_cancel_subscription_endpoint_exists PASSED [  8%]
tests\test_clerk_auth_complete.py::test_webhook_creates_user FAILED      [  8%]
tests\test_clerk_auth_complete.py::test_webhook_rejects_invalid_signature PASSED [  8%]
tests\test_clerk_auth_complete.py::test_webhook_rejects_missing_signature PASSED [  8%]
tests\test_clerk_auth_complete.py::test_webhook_updates_existing_user FAILED [  8%]
tests\test_clerk_auth_complete.py::test_webhook_update_creates_if_not_exists FAILED [  8%]
tests\test_clerk_auth_complete.py::test_webhook_soft_deletes_user FAILED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_updates_last_login_on_session_created FAILED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_handles_session_ended FAILED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_handles_missing_email_addresses FAILED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_upserts_organization_metadata FAILED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_creates_organization_when_missing FAILED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_deactivates_organization_on_delete FAILED [  9%]
tests\test_clerk_auth_complete.py::test_webhook_handles_invalid_role_gracefully FAILED [  9%]
tests\test_clerk_auth_complete.py::test_auth_me_returns_current_user FAILED [  9%]
tests\test_clerk_auth_complete.py::test_auth_me_requires_token PASSED    [  9%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_invalid_token PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_token_for_nonexistent_user FAILED [ 10%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_token_without_sub PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_org_claim_mismatch FAILED [ 10%]
tests\test_clerk_auth_complete.py::test_auth_me_rejects_role_claim_mismatch FAILED [ 10%]
tests\test_clerk_auth_complete.py::test_auth_me_populates_missing_org_from_claim FAILED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_handles_empty_data_gracefully PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_ignores_unknown_event_types PASSED [ 10%]
tests\test_clerk_auth_complete.py::test_user_creation_with_all_roles FAILED [ 10%]
tests\test_clerk_auth_complete.py::test_webhook_handles_invalid_timestamp_format FAILED [ 10%]
tests\test_clerk_auth_complete.py::test_full_user_lifecycle FAILED       [ 11%]
tests\test_community_models.py::test_create_post FAILED                  [ 11%]
tests\test_community_models.py::test_post_with_tags FAILED               [ 11%]
tests\test_community_models.py::test_post_multi_tenancy FAILED           [ 11%]
tests\test_community_models.py::test_create_comment FAILED               [ 11%]
tests\test_community_models.py::test_nested_comments FAILED              [ 11%]
tests\test_community_models.py::test_post_comment_relationship FAILED    [ 11%]
tests\test_community_models.py::test_create_reaction FAILED              [ 11%]
tests\test_community_models.py::test_reaction_on_comment FAILED          [ 11%]
tests\test_community_models.py::test_unique_reaction_constraint FAILED   [ 11%]
tests\test_community_models.py::test_create_follow FAILED                [ 11%]
tests\test_community_models.py::test_unique_follow_constraint FAILED     [ 12%]
tests\test_community_models.py::test_create_moderation_action FAILED     [ 12%]
tests\test_community_models.py::test_moderation_action_types FAILED      [ 12%]
tests\test_community_service.py::test_create_post ERROR                  [ 12%]
tests\test_community_service.py::test_get_post_by_id ERROR               [ 12%]
tests\test_community_service.py::test_get_post_by_id_wrong_org ERROR     [ 12%]
tests\test_community_service.py::test_update_post ERROR                  [ 12%]
tests\test_community_service.py::test_update_post_unauthorized ERROR     [ 12%]
tests\test_community_service.py::test_delete_post ERROR                  [ 12%]
tests\test_community_service.py::test_delete_post_unauthorized ERROR     [ 12%]
tests\test_community_service.py::test_list_posts ERROR                   [ 13%]
tests\test_community_service.py::test_list_posts_filter_by_category ERROR [ 13%]
tests\test_community_service.py::test_list_posts_search ERROR            [ 13%]
tests\test_community_service.py::test_create_comment ERROR               [ 13%]
tests\test_community_service.py::test_create_comment_on_nonexistent_post ERROR [ 13%]
tests\test_community_service.py::test_create_nested_comment ERROR        [ 13%]
tests\test_community_service.py::test_delete_comment ERROR               [ 13%]
tests\test_community_service.py::test_delete_comment_unauthorized ERROR  [ 13%]
tests\test_community_service.py::test_get_comments_for_post ERROR        [ 13%]
tests\test_community_service.py::test_add_reaction ERROR                 [ 13%]
tests\test_community_service.py::test_add_reaction_duplicate ERROR       [ 14%]
tests\test_community_service.py::test_remove_reaction ERROR              [ 14%]
tests\test_community_service.py::test_get_reactions ERROR                [ 14%]
tests\test_community_service.py::test_follow_user ERROR                  [ 14%]
tests\test_community_service.py::test_follow_user_self ERROR             [ 14%]
tests\test_community_service.py::test_follow_user_duplicate ERROR        [ 14%]
tests\test_community_service.py::test_unfollow_user ERROR                [ 14%]
tests\test_community_service.py::test_get_follow_stats ERROR             [ 14%]
tests\test_community_service.py::test_moderate_content_flag ERROR        [ 14%]
tests\test_community_service.py::test_moderate_content_delete ERROR      [ 14%]
tests\test_community_service.py::test_get_flagged_content ERROR          [ 14%]
tests\test_community_service.py::test_get_community_analytics ERROR      [ 15%]
tests\test_database_reset.py::test_reset_metadata_restores_dropped_tables PASSED [ 15%]
tests\test_database_reset.py::test_safe_drop_schema_handles_drop_all_errors PASSED [ 15%]
tests\test_deal_endpoints.py::test_create_deal_success FAILED            [ 15%]
tests\test_deal_endpoints.py::test_create_deal_validation_errors FAILED  [ 15%]
tests\test_deal_endpoints.py::test_create_deal_sets_owner_and_org FAILED [ 15%]
tests\test_deal_endpoints.py::test_create_deal_requires_auth PASSED      [ 15%]
tests\test_deal_endpoints.py::test_create_deal_default_stage FAILED      [ 15%]
tests\test_deal_endpoints.py::test_list_deals_returns_org_deals_only FAILED [ 15%]
tests\test_deal_endpoints.py::test_list_deals_pagination_works FAILED    [ 15%]
tests\test_deal_endpoints.py::test_list_deals_filter_by_stage FAILED     [ 16%]
tests\test_deal_endpoints.py::test_list_deals_search_by_name FAILED      [ 16%]
tests\test_deal_endpoints.py::test_list_deals_sort_by_created_at FAILED  [ 16%]
tests\test_deal_endpoints.py::test_list_deals_excludes_archived FAILED   [ 16%]
tests\test_deal_endpoints.py::test_list_deals_requires_auth PASSED       [ 16%]
tests\test_deal_endpoints.py::test_get_deal_success FAILED               [ 16%]
tests\test_deal_endpoints.py::test_get_deal_not_found FAILED             [ 16%]
tests\test_deal_endpoints.py::test_get_deal_forbidden_other_org FAILED   [ 16%]
tests\test_deal_endpoints.py::test_get_deal_requires_auth PASSED         [ 16%]
tests\test_deal_endpoints.py::test_update_deal_success FAILED            [ 16%]
tests\test_deal_endpoints.py::test_update_deal_stage_change FAILED       [ 17%]
tests\test_deal_endpoints.py::test_update_deal_partial_update FAILED     [ 17%]
tests\test_deal_endpoints.py::test_update_deal_forbidden_other_org FAILED [ 17%]
tests\test_deal_endpoints.py::test_update_deal_validation_errors FAILED  [ 17%]
tests\test_deal_endpoints.py::test_archive_deal_success FAILED           [ 17%]
tests\test_deal_endpoints.py::test_archive_deal_forbidden_other_org FAILED [ 17%]
tests\test_deal_endpoints.py::test_unarchive_deal_success FAILED         [ 17%]
tests\test_deal_endpoints.py::test_unarchive_deal_forbidden_other_org FAILED [ 17%]
tests\test_deal_matching_api.py::TestDealMatchingCriteriaAPI::test_create_criteria_success ERROR [ 17%]
tests\test_deal_matching_api.py::TestDealMatchingCriteriaAPI::test_create_criteria_requires_auth ERROR [ 17%]
tests\test_deal_matching_api.py::TestDealMatchingCriteriaAPI::test_list_criteria ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_find_matches_for_deal ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_find_matches_requires_auth ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_list_matches_for_deal ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_list_matches_requires_auth ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_list_matches_deal_not_found ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchingAPI::test_find_matches_deal_not_found ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_view ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_save ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_pass ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_request_intro ERROR [ 18%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_requires_auth ERROR [ 19%]
tests\test_deal_matching_api.py::TestDealMatchActionsAPI::test_record_match_action_match_not_found ERROR [ 19%]
tests\test_deal_matching_api.py::TestDealMatchingIntegration::test_create_criteria_and_find_matches_workflow ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchCriteriaModel::test_create_deal_match_criteria_with_required_fields ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchCriteriaModel::test_create_criteria_with_optional_fields ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchCriteriaModel::test_criteria_enforces_organization_isolation ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchModel::test_create_deal_match ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchModel::test_match_score_validation ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchModel::test_match_status_tracking ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchActionModel::test_create_match_action ERROR [ 19%]
tests\test_deal_matching_models.py::TestDealMatchActionModel::test_track_multiple_actions_on_match ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_industry_match_exact ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_industry_match_partial ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_industry_match_none ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_size_match_within_range ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_size_match_outside_range ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_geography_match_exact ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_geography_match_none ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_semantic_similarity PASSED [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_calculate_weighted_score ERROR [ 20%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_determine_confidence_level_high PASSED [ 21%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_determine_confidence_level_medium PASSED [ 21%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_determine_confidence_level_low PASSED [ 21%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_find_matches_returns_ranked_results ERROR [ 21%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_find_matches_filters_low_scores ERROR [ 21%]
tests\test_deal_matching_service.py::TestDealMatchingService::test_match_result_contains_explanation ERROR [ 21%]
tests\test_document_ai_and_versions.py::TestAISuggestionEndpoints::test_fetch_ai_suggestions FAILED [ 21%]
tests\test_document_ai_and_versions.py::TestAISuggestionEndpoints::test_accept_ai_suggestion FAILED [ 21%]
tests\test_document_ai_and_versions.py::TestAISuggestionEndpoints::test_reject_ai_suggestion FAILED [ 21%]
tests\test_document_ai_and_versions.py::TestVersionHistoryEndpoints::test_list_document_versions FAILED [ 21%]
tests\test_document_ai_and_versions.py::TestVersionHistoryEndpoints::test_restore_document_version FAILED [ 22%]
tests\test_document_endpoints.py::test_create_folder_success ERROR       [ 22%]
tests\test_document_endpoints.py::test_upload_document_success ERROR     [ 22%]
tests\test_document_endpoints.py::test_upload_document_rejects_large_files ERROR [ 22%]
tests\test_document_endpoints.py::test_list_documents_filters_by_folder ERROR [ 22%]
tests\test_document_endpoints.py::test_download_document_records_access_log ERROR [ 22%]
tests\test_document_endpoints.py::test_set_document_permission ERROR     [ 22%]
tests\test_document_endpoints.py::test_list_folders_lazy_loading ERROR   [ 22%]
tests\test_document_endpoints.py::test_list_folders_supports_search ERROR [ 22%]
tests\test_document_endpoints.py::test_create_nested_folder ERROR        [ 22%]
tests\test_document_endpoints.py::test_rename_folder ERROR               [ 22%]
tests\test_document_endpoints.py::test_delete_empty_folder ERROR         [ 23%]
tests\test_document_endpoints.py::test_delete_non_empty_folder_fails ERROR [ 23%]
tests\test_document_endpoints.py::test_folder_requires_authentication ERROR [ 23%]
tests\test_document_endpoints.py::test_folder_organization_isolation ERROR [ 23%]
tests\test_document_endpoints.py::test_upload_multiple_documents ERROR   [ 23%]
tests\test_document_endpoints.py::test_upload_unsupported_file_type ERROR [ 23%]
tests\test_document_endpoints.py::test_upload_creates_audit_log ERROR    [ 23%]
tests\test_document_endpoints.py::test_search_documents_by_filename ERROR [ 23%]
tests\test_document_endpoints.py::test_filter_documents_by_file_type ERROR [ 23%]
tests\test_document_endpoints.py::test_upload_same_name_creates_new_version ERROR [ 23%]
tests\test_document_endpoints.py::test_list_document_versions ERROR      [ 24%]
tests\test_document_endpoints.py::test_download_specific_version ERROR   [ 24%]
tests\test_document_endpoints.py::test_restore_previous_version ERROR    [ 24%]
tests\test_document_endpoints.py::test_max_versions_enforced ERROR       [ 24%]
tests\test_document_endpoints.py::test_delete_document_archives_all_versions ERROR [ 24%]
tests\test_document_endpoints.py::test_viewer_cannot_delete_document ERROR [ 24%]
tests\test_document_endpoints.py::test_viewer_can_download_document ERROR [ 24%]
tests\test_document_endpoints.py::test_editor_can_upload_with_folder_permission ERROR [ 24%]
tests\test_document_endpoints.py::test_granting_folder_permission_creates_audit_log ERROR [ 24%]
tests\test_document_endpoints.py::test_revoking_folder_permission_creates_audit_log ERROR [ 24%]
tests\test_document_endpoints.py::test_revoking_document_permission_creates_audit_log ERROR [ 25%]
tests\test_document_endpoints.py::test_editor_cannot_delete_others_document ERROR [ 25%]
tests\test_document_endpoints.py::test_editor_can_delete_own_document ERROR [ 25%]
tests\test_document_endpoints.py::test_delete_document_requires_editor_permission ERROR [ 25%]
tests\test_document_endpoints.py::test_delete_document_records_audit_log ERROR [ 25%]
tests\test_document_endpoints.py::test_access_logs_include_user_name ERROR [ 25%]
tests\test_document_endpoints.py::test_bulk_download_documents ERROR     [ 25%]
tests\test_document_endpoints.py::test_bulk_download_requires_permission ERROR [ 25%]
tests\test_document_endpoints.py::test_bulk_delete_documents ERROR       [ 25%]
tests\test_document_endpoints.py::test_bulk_delete_requires_owner_permission ERROR [ 25%]
tests\test_document_endpoints.py::test_bulk_delete_partial_failure ERROR [ 25%]
tests\test_document_endpoints.py::test_document_question_workflow ERROR  [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_create_template FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_create_template_forbidden_other_org FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_list_templates FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_list_templates_with_filters FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_get_template FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_get_template_not_found FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_update_template FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentTemplateEndpoints::test_delete_template FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentGenerationEndpoints::test_generate_document FAILED [ 26%]
tests\test_document_generation_api.py::TestDocumentGenerationEndpoints::test_generate_document_missing_variables FAILED [ 27%]
tests\test_document_generation_api.py::TestDocumentGenerationEndpoints::test_generate_document_template_not_found FAILED [ 27%]
tests\test_document_generation_api.py::TestGeneratedDocumentEndpoints::test_list_generated_documents FAILED [ 27%]
tests\test_document_generation_api.py::TestGeneratedDocumentEndpoints::test_get_generated_document FAILED [ 27%]
tests\test_document_generation_api.py::TestGeneratedDocumentEndpoints::test_update_document_status FAILED [ 27%]
tests\test_document_generation_api.py::TestGeneratedDocumentEndpoints::test_update_document_content FAILED [ 27%]
tests\test_document_generation_api.py::TestTemplateRenderingService::test_complex_template_rendering FAILED [ 27%]
tests\test_document_generation_api.py::TestDocumentExportEndpoints::test_export_document_as_pdf FAILED [ 27%]
tests\test_document_generation_api.py::TestDocumentExportEndpoints::test_export_document_as_docx FAILED [ 27%]
tests\test_document_generation_api.py::TestDocumentExportEndpoints::test_export_document_not_found FAILED [ 27%]
tests\test_document_generation_models.py::test_create_document_template ERROR [ 28%]
tests\test_document_generation_models.py::test_template_status_enum ERROR [ 28%]
tests\test_document_generation_models.py::test_template_version_tracking ERROR [ 28%]
tests\test_document_generation_models.py::test_template_repr ERROR       [ 28%]
tests\test_document_generation_models.py::test_create_generated_document ERROR [ 28%]
tests\test_document_generation_models.py::test_generated_document_status_enum ERROR [ 28%]
tests\test_document_generation_models.py::test_generated_document_timestamps ERROR [ 28%]
tests\test_document_generation_models.py::test_generated_document_file_path ERROR [ 28%]
tests\test_document_generation_models.py::test_template_document_relationship ERROR [ 28%]
tests\test_document_generation_models.py::test_template_variables_json_field ERROR [ 28%]
tests\test_document_service.py::test_trim_document_versions_keeps_latest_twenty FAILED [ 29%]
tests\test_document_service.py::test_trim_document_versions_noop_when_within_limit FAILED [ 29%]
tests\test_document_service.py::test_bulk_download_documents_logs_access FAILED [ 29%]
tests\test_document_service.py::test_bulk_download_documents_requires_viewer_permission FAILED [ 29%]
tests\test_document_service_error_paths.py::test_delete_folder_with_documents_raises_value_error FAILED [ 29%]
tests\test_document_service_error_paths.py::test_delete_folder_with_subfolders_raises_value_error FAILED [ 29%]
tests\test_document_service_error_paths.py::test_upload_document_unsupported_file_type FAILED [ 29%]
tests\test_document_service_error_paths.py::test_upload_document_file_size_exceeds_limit FAILED [ 29%]
tests\test_document_service_error_paths.py::test_create_folder_insufficient_permissions_for_subfolder FAILED [ 29%]
tests\test_document_service_error_paths.py::test_create_folder_non_owner_cannot_create_top_level FAILED [ 29%]
tests\test_document_service_error_paths.py::test_upload_document_non_owner_cannot_upload_to_root FAILED [ 29%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_has_audio_podcast_access PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_starter_no_audio_podcast_access PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_no_video_podcast_access PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_premium_has_video_podcast_access PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_premium_has_youtube_integration PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_no_youtube_integration PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_enterprise_has_live_streaming PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_premium_no_live_streaming PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_enterprise_has_multi_language_transcription PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_has_basic_transcription PASSED [ 30%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_professional_no_ai_enhanced_transcription PASSED [ 31%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_raises_feature_not_found_for_invalid_feature PASSED [ 31%]
tests\test_entitlement.py::TestCheckFeatureAccess::test_all_tiers_have_core_features PASSED [ 31%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_starter_tier_features PASSED [ 31%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_professional_tier_features PASSED [ 31%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_premium_tier_features PASSED [ 31%]
tests\test_entitlement.py::TestGetFeaturesForTier::test_enterprise_tier_features PASSED [ 31%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-podcast_audio-False] PASSED [ 31%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-podcast_video-False] PASSED [ 31%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-youtube_integration-False] PASSED [ 31%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-live_streaming-False] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[starter-deal_management-True] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-podcast_audio-True] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-podcast_video-False] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-youtube_integration-False] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-live_streaming-False] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-transcription_basic-True] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[professional-transcription_ai_enhanced-False] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-podcast_audio-True] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-podcast_video-True] PASSED [ 32%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-youtube_integration-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-live_streaming-False] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-transcription_basic-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-transcription_ai_enhanced-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[premium-transcription_multi_language-False] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-podcast_audio-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-podcast_video-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-youtube_integration-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-live_streaming-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-transcription_basic-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-transcription_ai_enhanced-True] PASSED [ 33%]
tests\test_entitlement.py::TestFeatureEntitlementMatrix::test_feature_entitlement_matrix[enterprise-transcription_multi_language-True] PASSED [ 34%]
tests\test_entitlement.py::TestFeatureNotFoundError::test_feature_not_found_error_message PASSED [ 34%]
tests\test_event_models.py::TestEventModel::test_create_event ERROR      [ 34%]
tests\test_event_models.py::TestEventModel::test_event_requires_organization ERROR [ 34%]
tests\test_event_models.py::TestEventModel::test_event_location_types ERROR [ 34%]
tests\test_event_models.py::TestEventTicketModel::test_create_event_ticket ERROR [ 34%]
tests\test_event_models.py::TestEventTicketModel::test_ticket_requires_event FAILED [ 34%]
tests\test_event_models.py::TestEventRegistrationModel::test_create_registration ERROR [ 34%]
tests\test_event_models.py::TestEventRegistrationModel::test_registration_requires_event_and_user FAILED [ 34%]
tests\test_event_models.py::TestEventSessionModel::test_create_event_session ERROR [ 34%]
tests\test_event_models.py::TestEventSessionModel::test_session_requires_event FAILED [ 35%]
tests\test_event_models.py::TestEventAnalyticsModel::test_create_event_analytics ERROR [ 35%]
tests\test_event_service.py::TestEventService::test_create_event ERROR   [ 35%]
tests\test_event_service.py::TestEventService::test_get_event ERROR      [ 35%]
tests\test_event_service.py::TestEventService::test_get_event_wrong_organization ERROR [ 35%]
tests\test_event_service.py::TestEventService::test_list_events_pagination ERROR [ 35%]
tests\test_event_service.py::TestEventService::test_update_event ERROR   [ 35%]
tests\test_event_service.py::TestEventService::test_delete_event_soft_delete ERROR [ 35%]
tests\test_event_service.py::TestEventTicketService::test_create_ticket ERROR [ 35%]
tests\test_event_service.py::TestEventTicketService::test_create_ticket_invalid_event ERROR [ 35%]
tests\test_event_service.py::TestEventRegistrationService::test_create_registration ERROR [ 36%]
tests\test_event_service.py::TestEventRegistrationService::test_create_registration_with_ticket ERROR [ 36%]
tests\test_event_service.py::TestEventRegistrationService::test_create_registration_sold_out_ticket ERROR [ 36%]
tests\test_event_service.py::TestEventRegistrationService::test_cancel_registration_updates_ticket ERROR [ 36%]
tests\test_event_service.py::TestEventAnalyticsService::test_get_event_analytics ERROR [ 36%]
tests\test_event_service.py::TestEventAnalyticsService::test_analytics_with_sessions ERROR [ 36%]
tests\test_financial_api.py::test_calculate_financial_ratios_endpoint ERROR [ 36%]
tests\test_financial_api.py::test_calculate_ratios_requires_authentication ERROR [ 36%]
tests\test_financial_api.py::test_calculate_ratios_deal_not_found ERROR  [ 36%]
tests\test_financial_api.py::test_calculate_ratios_with_partial_data ERROR [ 36%]
tests\test_financial_api.py::test_get_financial_connections_endpoint_returns_empty_list_when_no_connections ERROR [ 37%]
tests\test_financial_api.py::test_get_financial_connections_endpoint_returns_connections ERROR [ 37%]
tests\test_financial_api.py::test_get_financial_ratios_not_found ERROR   [ 37%]
tests\test_financial_api.py::test_get_financial_narrative_not_found ERROR [ 37%]
tests\test_financial_api.py::test_connect_xero_initiates_oauth_flow ERROR [ 37%]
tests\test_financial_api.py::test_connect_xero_with_invalid_deal ERROR   [ 37%]
tests\test_financial_api.py::test_xero_oauth_callback_success ERROR      [ 37%]
tests\test_financial_api.py::test_xero_oauth_callback_missing_code ERROR [ 37%]
tests\test_financial_api.py::test_sync_financial_data_success ERROR      [ 37%]
tests\test_financial_api.py::test_sync_financial_data_no_connection ERROR [ 37%]
tests\test_financial_api.py::test_connect_quickbooks_initiates_oauth_flow ERROR [ 37%]
tests\test_financial_api.py::test_connect_quickbooks_with_invalid_deal ERROR [ 38%]
tests\test_financial_api.py::test_quickbooks_oauth_callback_success ERROR [ 38%]
tests\test_financial_api.py::test_quickbooks_oauth_callback_missing_params ERROR [ 38%]
tests\test_financial_api.py::test_sync_quickbooks_financial_data_success ERROR [ 38%]
tests\test_financial_api.py::test_sync_quickbooks_financial_data_no_connection ERROR [ 38%]
tests\test_financial_api.py::test_quickbooks_connection_status ERROR     [ 38%]
tests\test_financial_api.py::test_disconnect_quickbooks_connection ERROR [ 38%]
tests\test_financial_api.py::test_connect_netsuite_initiates_oauth_flow ERROR [ 38%]
tests\test_financial_api.py::test_connect_netsuite_with_invalid_deal ERROR [ 38%]
tests\test_financial_api.py::test_netsuite_oauth_callback_success ERROR  [ 38%]
tests\test_financial_api.py::test_sync_netsuite_financial_data_success ERROR [ 39%]
tests\test_financial_api.py::test_sync_netsuite_financial_data_no_connection ERROR [ 39%]
tests\test_financial_api.py::test_connect_sage_initiates_oauth_flow ERROR [ 39%]
tests\test_financial_api.py::test_connect_sage_with_invalid_deal ERROR   [ 39%]
tests\test_financial_api.py::test_sage_oauth_callback_success ERROR      [ 39%]
tests\test_financial_api.py::test_sync_sage_financial_data_success ERROR [ 39%]
tests\test_financial_api.py::test_sync_sage_financial_data_no_connection ERROR [ 39%]
tests\test_financial_api.py::test_get_readiness_score_success ERROR      [ 39%]
tests\test_financial_api.py::test_get_readiness_score_no_narrative ERROR [ 39%]
tests\test_financial_models_sync.py::test_create_financial_connection FAILED [ 39%]
tests\test_financial_models_sync.py::test_financial_connection_cascade_delete FAILED [ 40%]
tests\test_financial_models_sync.py::test_create_financial_statement_balance_sheet FAILED [ 40%]
tests\test_financial_models_sync.py::test_financial_statement_with_json_fields FAILED [ 40%]
tests\test_financial_models_sync.py::test_create_financial_ratios FAILED [ 40%]
tests\test_financial_models_sync.py::test_financial_ratio_nullable_fields FAILED [ 40%]
tests\test_financial_models_sync.py::test_create_financial_narrative FAILED [ 40%]
tests\test_financial_models_sync.py::test_financial_narrative_version_control FAILED [ 40%]
tests\test_financial_models_sync.py::test_complete_financial_data_chain FAILED [ 40%]
tests\test_financial_models_sync.py::test_cascade_delete_all_financial_data FAILED [ 40%]
tests\test_financial_narrative_service.py::test_build_narrative_prompt_with_complete_data PASSED [ 40%]
tests\test_financial_narrative_service.py::test_build_narrative_prompt_with_minimal_data PASSED [ 40%]
tests\test_financial_narrative_service.py::test_parse_narrative_response_with_complete_response PASSED [ 41%]
tests\test_financial_narrative_service.py::test_parse_narrative_response_with_red_flags PASSED [ 41%]
tests\test_financial_narrative_service.py::test_calculate_readiness_score_high_quality_deal PASSED [ 41%]
tests\test_financial_narrative_service.py::test_calculate_readiness_score_low_quality_deal PASSED [ 41%]
tests\test_financial_narrative_service.py::test_calculate_readiness_score_moderate_deal PASSED [ 41%]
tests\test_financial_narrative_service.py::test_generate_financial_narrative_success FAILED [ 41%]
tests\test_financial_narrative_service.py::test_generate_financial_narrative_returns_existing_by_default FAILED [ 41%]
tests\test_financial_narrative_service.py::test_generate_financial_narrative_raises_error_when_no_data FAILED [ 41%]
tests\test_financial_narrative_service.py::test_generate_financial_narrative_raises_error_when_deal_not_found FAILED [ 41%]
tests\test_financial_ratios.py::test_current_ratio_calculation PASSED    [ 41%]
tests\test_financial_ratios.py::test_current_ratio_with_zero_liabilities PASSED [ 42%]
tests\test_financial_ratios.py::test_quick_ratio_calculation PASSED      [ 42%]
tests\test_financial_ratios.py::test_quick_ratio_with_zero_liabilities PASSED [ 42%]
tests\test_financial_ratios.py::test_cash_ratio_calculation PASSED       [ 42%]
tests\test_financial_ratios.py::test_operating_cash_flow_ratio_calculation PASSED [ 42%]
tests\test_financial_ratios.py::test_defensive_interval_ratio_calculation PASSED [ 42%]
tests\test_financial_ratios.py::test_gross_profit_margin_calculation PASSED [ 42%]
tests\test_financial_ratios.py::test_gross_profit_margin_with_zero_revenue PASSED [ 42%]
tests\test_financial_ratios.py::test_operating_profit_margin_calculation PASSED [ 42%]
tests\test_financial_ratios.py::test_net_profit_margin_calculation PASSED [ 42%]
tests\test_financial_ratios.py::test_return_on_assets_calculation PASSED [ 43%]
tests\test_financial_ratios.py::test_return_on_equity_calculation PASSED [ 43%]
tests\test_financial_ratios.py::test_return_on_invested_capital_calculation PASSED [ 43%]
tests\test_financial_ratios.py::test_ebitda_margin_calculation PASSED    [ 43%]
tests\test_financial_ratios.py::test_ebit_margin_calculation PASSED      [ 43%]
tests\test_financial_ratios.py::test_debt_to_equity_calculation PASSED   [ 43%]
tests\test_financial_ratios.py::test_debt_to_equity_with_zero_equity PASSED [ 43%]
tests\test_financial_ratios.py::test_debt_to_assets_calculation PASSED   [ 43%]
tests\test_financial_ratios.py::test_equity_multiplier_calculation PASSED [ 43%]
tests\test_financial_ratios.py::test_interest_coverage_calculation PASSED [ 43%]
tests\test_financial_ratios.py::test_interest_coverage_with_zero_interest PASSED [ 44%]
tests\test_financial_ratios.py::test_debt_service_coverage_calculation PASSED [ 44%]
tests\test_financial_ratios.py::test_financial_leverage_calculation PASSED [ 44%]
tests\test_financial_ratios.py::test_calculate_all_ratios_comprehensive PASSED [ 44%]
tests\test_financial_ratios.py::test_calculate_all_ratios_with_missing_data PASSED [ 44%]
tests\test_financial_ratios.py::test_calculate_all_ratios_with_empty_data PASSED [ 44%]
tests\test_financial_xero_integration.py::test_placeholder_ratio_engine SKIPPED [ 44%]
tests\test_master_admin_api.py::test_master_admin_requires_auth PASSED   [ 44%]
tests\test_master_admin_api.py::test_goal_crud_flow ERROR                [ 44%]
tests\test_master_admin_api.py::test_activity_crud_and_listing ERROR     [ 44%]
tests\test_master_admin_api.py::test_scores_and_dashboard_stats ERROR    [ 44%]
tests\test_master_admin_api.py::test_focus_session_flow ERROR            [ 45%]
tests\test_master_admin_api.py::test_nudge_management ERROR              [ 45%]
tests\test_master_admin_api.py::test_meeting_template_management ERROR   [ 45%]
tests\test_master_admin_api.py::test_prospect_crud_flow ERROR            [ 45%]
tests\test_master_admin_api.py::test_deal_pipeline_flow ERROR            [ 45%]
tests\test_master_admin_api.py::test_campaign_and_recipient_management ERROR [ 45%]
tests\test_master_admin_api.py::test_content_script_and_piece_flow ERROR [ 45%]
tests\test_master_admin_api.py::test_lead_capture_flow ERROR             [ 45%]
tests\test_master_admin_api.py::test_collateral_library_flow ERROR       [ 45%]
tests\test_master_admin_models.py::TestAdminGoalModel::test_create_admin_goal ERROR [ 45%]
tests\test_master_admin_models.py::TestAdminGoalModel::test_admin_goal_unique_constraint ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminGoalModel::test_admin_goal_defaults ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminGoalModel::test_admin_goal_repr ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminActivityModel::test_create_admin_activity ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminActivityModel::test_admin_activity_type_constraint SKIPPED [ 46%]
tests\test_master_admin_models.py::TestAdminActivityModel::test_admin_activity_status_constraint SKIPPED [ 46%]
tests\test_master_admin_models.py::TestAdminActivityModel::test_admin_activity_default_amount ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminActivityModel::test_admin_activity_with_prospect ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminScoreModel::test_create_admin_score ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminScoreModel::test_admin_score_range_constraint ERROR [ 46%]
tests\test_master_admin_models.py::TestAdminScoreModel::test_admin_score_unique_constraint ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminScoreModel::test_admin_score_defaults ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminFocusSessionModel::test_create_focus_session ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminFocusSessionModel::test_complete_focus_session ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminFocusSessionModel::test_interrupted_focus_session ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminNudgeModel::test_create_nudge ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminNudgeModel::test_nudge_type_constraint SKIPPED [ 47%]
tests\test_master_admin_models.py::TestAdminNudgeModel::test_nudge_priority_constraint SKIPPED [ 47%]
tests\test_master_admin_models.py::TestAdminNudgeModel::test_mark_nudge_as_read ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminMeetingModel::test_create_meeting_template ERROR [ 47%]
tests\test_master_admin_models.py::TestAdminMeetingModel::test_meeting_type_constraint SKIPPED [ 48%]
tests\test_master_admin_models.py::TestAdminMeetingModel::test_meeting_default_duration ERROR [ 48%]
tests\test_models_financial_connection.py::test_create_financial_connection FAILED [ 48%]
tests\test_models_financial_connection.py::test_financial_connection_with_optional_fields FAILED [ 48%]
tests\test_models_financial_connection.py::test_financial_connection_cascade_delete_with_deal FAILED [ 48%]
tests\test_models_financial_connection.py::test_financial_connection_relationship_to_deal FAILED [ 48%]
tests\test_models_financial_connection.py::test_financial_connection_soft_delete FAILED [ 48%]
tests\test_models_financial_connection.py::test_financial_connection_status_values FAILED [ 48%]
tests\test_netsuite_integration.py::test_netsuite_rest_api_client_can_be_imported SKIPPED [ 48%]
tests\test_netsuite_integration.py::test_real_netsuite_client_class_exists SKIPPED [ 48%]
tests\test_netsuite_integration.py::test_netsuite_oauth_url_uses_real_credentials SKIPPED [ 48%]
tests\test_netsuite_integration.py::test_netsuite_client_has_real_configuration SKIPPED [ 49%]
tests\test_netsuite_integration.py::test_token_exchange_structure_matches_netsuite_api SKIPPED [ 49%]
tests\test_netsuite_integration.py::test_get_connections_returns_real_company_structure SKIPPED [ 49%]
tests\test_netsuite_integration.py::test_balance_sheet_import_uses_real_netsuite_api_format SKIPPED [ 49%]
tests\test_netsuite_integration.py::test_netsuite_rest_api_error_handling SKIPPED [ 49%]
tests\test_netsuite_integration.py::test_netsuite_account_id_configuration SKIPPED [ 49%]
tests\test_netsuite_integration.py::test_full_netsuite_oauth_flow_with_real_api SKIPPED [ 49%]
tests\test_organization_service.py::TestOrganizationService::test_upsert_from_clerk_creates_with_defaults FAILED [ 49%]
tests\test_organization_service.py::TestOrganizationService::test_upsert_from_clerk_normalizes_subscription_tier FAILED [ 49%]
tests\test_organization_service.py::TestOrganizationService::test_upsert_from_clerk_falls_back_to_starter_on_invalid_tier FAILED [ 49%]
tests\test_organization_service.py::TestOrganizationService::test_upsert_from_clerk_generates_unique_slug FAILED [ 50%]
tests\test_organization_service.py::TestOrganizationService::test_deactivate_organization_marks_inactive FAILED [ 50%]
tests\test_path_safety.py::test_pytest_ignore_collect_delegates_to_path_safety PASSED [ 50%]
tests\test_path_safety.py::test_reserved_name_detection_handles_strings PASSED [ 50%]
tests\test_path_safety.py::test_reserved_name_detection_handles_py_path_like_objects PASSED [ 50%]
tests\test_path_safety.py::test_should_ignore_path_only_on_windows PASSED [ 50%]
tests\test_pipeline_template_api.py::test_create_and_list_pipeline_templates ERROR [ 50%]
tests\test_pipeline_template_api.py::test_update_pipeline_template ERROR [ 50%]
tests\test_pipeline_template_api.py::test_delete_pipeline_template ERROR [ 50%]
tests\test_pipeline_template_schemas.py::test_stage_color_normalizes_to_uppercase_hex PASSED [ 50%]
tests\test_pipeline_template_schemas.py::test_stage_color_without_hash_gets_hash_prefix PASSED [ 51%]
tests\test_pipeline_template_schemas.py::test_stage_color_with_hash_preserves_hash_and_uppercases PASSED [ 51%]
tests\test_pipeline_template_schemas.py::test_template_requires_at_least_one_stage PASSED [ 51%]
tests\test_podcast_api.py::TestPodcastEpisodeCreation::test_starter_user_blocked_from_creating_episode FAILED [ 51%]
tests\test_podcast_api.py::TestPodcastEpisodeCreation::test_quota_service_passes_db_session FAILED [ 51%]
tests\test_podcast_api.py::TestPodcastEpisodeCreation::test_professional_user_can_create_episode FAILED [ 51%]
tests\test_podcast_api.py::TestPodcastEpisodeCreation::test_professional_user_quota_exceeded_returns_429 FAILED [ 51%]
tests\test_podcast_api.py::TestPodcastEpisodeCreation::test_professional_user_blocked_from_video_episode FAILED [ 51%]
tests\test_podcast_api.py::TestPodcastEpisodeCreation::test_premium_user_can_create_video_episode FAILED [ 51%]
tests\test_podcast_api.py::TestPodcastUsageEndpoint::test_usage_endpoint_returns_quota_summary_for_professional PASSED [ 51%]
tests\test_podcast_api.py::TestPodcastUsageEndpoint::test_usage_endpoint_reports_unlimited_for_premium PASSED [ 51%]
tests\test_podcast_api.py::TestPodcastUsageEndpoint::test_usage_endpoint_blocks_starter_tier PASSED [ 52%]
tests\test_podcast_api.py::TestPodcastUsageEndpoint::test_usage_endpoint_sets_warning_headers_when_near_limit PASSED [ 52%]
tests\test_podcast_api.py::TestPodcastUsageEndpoint::test_usage_endpoint_sets_upgrade_headers_when_quota_exceeded PASSED [ 52%]
tests\test_podcast_api.py::TestPodcastFeatureAccessEndpoint::test_feature_access_returns_true_for_authorized_tier PASSED [ 52%]
tests\test_podcast_api.py::TestPodcastFeatureAccessEndpoint::test_feature_access_returns_false_for_insufficient_tier PASSED [ 52%]
tests\test_podcast_api.py::TestPodcastFeatureAccessEndpoint::test_feature_access_returns_404_for_unknown_feature PASSED [ 52%]
tests\test_podcast_api.py::TestPodcastListEndpoint::test_list_episodes_returns_organizations_episodes FAILED [ 52%]
tests\test_podcast_api.py::TestPodcastListEndpoint::test_list_episodes_filters_by_status FAILED [ 52%]
tests\test_podcast_api.py::TestPodcastGetSingleEndpoint::test_get_single_episode_returns_episode FAILED [ 52%]
tests\test_podcast_api.py::TestPodcastGetSingleEndpoint::test_get_single_episode_returns_404_when_not_found FAILED [ 52%]
tests\test_podcast_api.py::TestPodcastUpdateEndpoint::test_update_episode_modifies_fields FAILED [ 53%]
tests\test_podcast_api.py::TestPodcastDeleteEndpoint::test_delete_episode_removes_episode FAILED [ 53%]
tests\test_podcast_api.py::TestPodcastDeleteEndpoint::test_delete_episode_returns_404_when_not_found FAILED [ 53%]
tests\test_podcast_api.py::TestPodcastYouTubeUpload::test_premium_user_can_publish_video_to_youtube FAILED [ 53%]
tests\test_podcast_api.py::TestPodcastYouTubeUpload::test_podcast_youtube_upload_requires_video_asset FAILED [ 53%]
tests\test_podcast_api.py::TestPodcastYouTubeUpload::test_youtube_upload_permission_error_returns_403 FAILED [ 53%]
tests\test_podcast_api.py::TestFeatureAccessEndpoint::test_feature_access_includes_labels_when_access_granted PASSED [ 53%]
tests\test_podcast_api.py::TestFeatureAccessEndpoint::test_feature_access_includes_upgrade_message_when_denied PASSED [ 53%]
tests\test_podcast_api.py::TestFeatureAccessEndpoint::test_feature_access_returns_404_for_unknown_feature PASSED [ 53%]
tests\test_podcast_api.py::TestAudioUpload::test_upload_audio_professional_success FAILED [ 53%]
tests\test_podcast_api.py::TestAudioUpload::test_upload_audio_starter_blocked FAILED [ 54%]
tests\test_podcast_api.py::TestAudioUpload::test_upload_audio_validates_file_format FAILED [ 54%]
tests\test_podcast_api.py::TestAudioUpload::test_upload_audio_validates_file_size FAILED [ 54%]
tests\test_podcast_api.py::TestAudioUpload::test_upload_audio_updates_episode_audio_url FAILED [ 54%]
tests\test_podcast_api.py::TestVideoUpload::test_upload_video_premium_success FAILED [ 54%]
tests\test_podcast_api.py::TestVideoUpload::test_upload_video_professional_blocked FAILED [ 54%]
tests\test_podcast_api.py::TestVideoUpload::test_upload_video_validates_file_format FAILED [ 54%]
tests\test_podcast_api.py::TestVideoUpload::test_upload_video_validates_file_size FAILED [ 54%]
tests\test_podcast_api.py::TestVideoUpload::test_upload_video_generates_thumbnail FAILED [ 54%]
tests\test_podcast_api.py::TestVideoUpload::test_upload_video_accepts_mov_format FAILED [ 54%]
tests\test_podcast_api.py::TestVideoUpload::test_upload_video_updates_episode_video_url FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_audio_professional_success FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_starter_blocked FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_requires_audio_file FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_updates_episode_transcript FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_handles_whisper_api_error FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_multi_language_requires_enterprise FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_multi_language_enterprise_success FAILED [ 55%]
tests\test_podcast_api.py::TestTranscription::test_transcribe_response_includes_metadata FAILED [ 55%]
tests\test_podcast_api.py::TestTranscriptDownload::test_download_transcript_txt_success FAILED [ 55%]
tests\test_podcast_api.py::TestTranscriptDownload::test_download_transcript_srt_success FAILED [ 55%]
tests\test_podcast_api.py::TestTranscriptDownload::test_download_transcript_requires_transcript FAILED [ 56%]
tests\test_podcast_api.py::TestTranscriptDownload::test_download_transcript_starter_blocked FAILED [ 56%]
tests\test_podcast_api.py::TestThumbnailGeneration::test_generate_thumbnail_premium_success FAILED [ 56%]
tests\test_podcast_api.py::TestThumbnailGeneration::test_generate_thumbnail_requires_video FAILED [ 56%]
tests\test_podcast_api.py::TestThumbnailGeneration::test_generate_thumbnail_professional_blocked FAILED [ 56%]
tests\test_podcast_service.py::TestPodcastService::test_create_episode FAILED [ 56%]
tests\test_podcast_service.py::TestPodcastService::test_get_episodes_filters_by_status FAILED [ 56%]
tests\test_podcast_service.py::TestPodcastService::test_publish_episode_sets_timestamp FAILED [ 56%]
tests\test_podcast_service.py::TestPodcastService::test_transcribe_episode_uses_whisper FAILED [ 56%]
tests\test_podcast_service.py::TestPodcastService::test_transcribe_episode_requires_entitlement FAILED [ 56%]
tests\test_podcast_service.py::TestPodcastService::test_get_episode_analytics_aggregates_platform_totals FAILED [ 57%]
tests\test_podcast_service.py::TestPodcastService::test_generate_rss_feed_includes_published_episodes FAILED [ 57%]
tests\test_podcast_service.py::TestPodcastService::test_multi_tenant_isolation FAILED [ 57%]
tests\test_podcast_service.py::TestPodcastService::test_update_episode_mutates_fields FAILED [ 57%]
tests\test_podcast_service.py::TestPodcastService::test_delete_episode_removes_record FAILED [ 57%]
tests\test_podcast_service.py::TestPodcastService::test_transcribe_episode_missing_episode_raises FAILED [ 57%]
tests\test_quickbooks_integration.py::test_quickbooks_python_sdk_can_be_imported SKIPPED [ 57%]
tests\test_quickbooks_integration.py::test_real_quickbooks_client_class_exists SKIPPED [ 57%]
tests\test_quickbooks_integration.py::test_quickbooks_oauth_url_uses_real_credentials SKIPPED [ 57%]
tests\test_quickbooks_integration.py::test_quickbooks_client_has_real_configuration SKIPPED [ 57%]
tests\test_quickbooks_integration.py::test_token_exchange_structure_matches_quickbooks_api SKIPPED [ 58%]
tests\test_quickbooks_integration.py::test_get_connections_returns_real_company_structure SKIPPED [ 58%]
tests\test_quickbooks_integration.py::test_balance_sheet_import_uses_real_quickbooks_api_format SKIPPED [ 58%]
tests\test_quickbooks_integration.py::test_quickbooks_sdk_error_handling SKIPPED [ 58%]
tests\test_quickbooks_integration.py::test_full_quickbooks_oauth_flow_with_real_api SKIPPED [ 58%]
tests\test_quota_service.py::TestCheckEpisodeQuota::test_professional_tier_allows_creation_within_quota PASSED [ 58%]
tests\test_quota_service.py::TestCheckEpisodeQuota::test_professional_tier_blocks_creation_at_quota_limit PASSED [ 58%]
tests\test_quota_service.py::TestCheckEpisodeQuota::test_premium_tier_unlimited_never_blocks PASSED [ 58%]
tests\test_quota_service.py::TestCheckEpisodeQuota::test_enterprise_tier_unlimited_never_blocks PASSED [ 58%]
tests\test_quota_service.py::TestCheckEpisodeQuota::test_starter_tier_blocks_all_podcast_creation PASSED [ 58%]
tests\test_quota_service.py::TestGetRemainingQuota::test_professional_tier_returns_correct_remaining PASSED [ 59%]
tests\test_quota_service.py::TestGetRemainingQuota::test_premium_tier_returns_unlimited_indicator PASSED [ 59%]
tests\test_quota_service.py::TestGetRemainingQuota::test_returns_zero_when_quota_exhausted PASSED [ 59%]
tests\test_quota_service.py::TestIncrementEpisodeCount::test_increments_usage_count_in_database FAILED [ 59%]
tests\test_quota_service.py::TestIncrementEpisodeCount::test_sync_session_increments_usage FAILED [ 59%]
tests\test_quota_service.py::TestIncrementEpisodeCount::test_creates_new_usage_record_for_first_episode FAILED [ 59%]
tests\test_quota_service.py::TestGetMonthlyUsage::test_returns_current_month_usage_count FAILED [ 59%]
tests\test_quota_service.py::TestGetMonthlyUsage::test_sync_session_returns_usage FAILED [ 59%]
tests\test_quota_service.py::TestGetMonthlyUsage::test_returns_zero_when_no_usage_records FAILED [ 59%]
tests\test_quota_service.py::TestQuotaExceededError::test_quota_exceeded_error_has_clear_message PASSED [ 59%]
tests\test_quota_service.py::TestQuotaExceededError::test_quota_exceeded_error_includes_upgrade_guidance PASSED [ 59%]
tests\test_quota_service.py::TestGetQuotaSummary::test_returns_professional_summary PASSED [ 60%]
tests\test_quota_service.py::TestGetQuotaSummary::test_returns_unlimited_summary PASSED [ 60%]
tests\test_quota_service.py::TestGetQuotaSummary::test_sets_warning_status_when_usage_exceeds_eighty_percent PASSED [ 60%]
tests\test_quota_service.py::TestGetQuotaSummary::test_sets_critical_status_when_usage_exceeds_ninety_percent PASSED [ 60%]
tests\test_quota_service.py::TestGetQuotaSummary::test_includes_period_bounds_for_monthly_reset PASSED [ 60%]
tests\test_quota_service.py::TestGetQuotaSummary::test_usage_resets_when_new_month_starts FAILED [ 60%]
tests\test_quota_service.py::TestGetQuotaSummary::test_marks_quota_exceeded_as_upgrade_required PASSED [ 60%]
tests\test_quota_service.py::TestResetMonthlyUsage::test_reset_monthly_usage_helper_is_defined PASSED [ 60%]
tests\test_quota_service.py::TestResetMonthlyUsage::test_reset_monthly_usage_creates_zero_record FAILED [ 60%]
tests\test_quota_service.py::TestResetMonthlyUsage::test_reset_monthly_usage_is_idempotent FAILED [ 60%]
tests\test_quota_service.py::TestMonthlyQuotaReset::test_quota_resets_when_new_billing_cycle_starts FAILED [ 61%]
tests\test_quota_service.py::TestMonthlyQuotaReset::test_usage_count_returns_zero_in_new_month FAILED [ 61%]
tests\test_quota_service.py::TestMonthlyQuotaReset::test_remaining_quota_resets_after_month_boundary FAILED [ 61%]
tests\test_rbac.py::test_get_current_admin_user_with_admin ERROR         [ 61%]
tests\test_rbac.py::test_get_current_admin_user_with_non_admin ERROR     [ 61%]
tests\test_rbac.py::test_require_role_exact_match ERROR                  [ 61%]
tests\test_rbac.py::test_require_role_no_match ERROR                     [ 61%]
tests\test_rbac.py::test_require_role_admin_override ERROR               [ 61%]
tests\test_rbac.py::test_require_min_role_exact_match ERROR              [ 61%]
tests\test_rbac.py::test_require_min_role_higher_role ERROR              [ 61%]
tests\test_rbac.py::test_require_min_role_lower_role ERROR               [ 62%]
tests\test_rbac.py::test_require_min_role_admin_override ERROR           [ 62%]
tests\test_rbac.py::test_role_hierarchy PASSED                           [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceInitialization::test_initialization_with_valid_credentials SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceInitialization::test_initialization_fails_without_credentials SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceInitialization::test_initialization_fails_with_partial_credentials SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileKey::test_generate_file_key_creates_unique_hash SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileKey::test_generate_file_key_is_unique SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_save_file_uploads_successfully SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_save_file_includes_metadata SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_save_file_handles_client_error SKIPPED [ 62%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_get_file_path_returns_presigned_url SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_get_file_path_raises_error_for_missing_file SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_delete_file_removes_from_storage SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_delete_file_returns_false_for_missing_file SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_file_exists_returns_true_for_existing_file SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_file_exists_returns_false_for_missing_file SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_get_file_size_returns_content_length SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceFileOperations::test_get_file_size_raises_error_for_missing_file SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServicePresignedURLs::test_get_presigned_url_generates_valid_url SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServicePresignedURLs::test_get_presigned_url_default_expiration SKIPPED [ 63%]
tests\test_s3_storage_service.py::TestS3StorageServiceContentTypes::test_guess_content_type_pdf SKIPPED [ 64%]
tests\test_s3_storage_service.py::TestS3StorageServiceContentTypes::test_guess_content_type_mp4 SKIPPED [ 64%]
tests\test_s3_storage_service.py::TestS3StorageServiceContentTypes::test_guess_content_type_unknown SKIPPED [ 64%]
tests\test_sage_integration.py::test_sage_rest_api_client_can_be_imported SKIPPED [ 64%]
tests\test_sage_integration.py::test_real_sage_client_class_exists SKIPPED [ 64%]
tests\test_sage_integration.py::test_sage_oauth_url_uses_real_credentials SKIPPED [ 64%]
tests\test_sage_integration.py::test_sage_client_has_real_configuration SKIPPED [ 64%]
tests\test_sage_integration.py::test_token_exchange_structure_matches_sage_api SKIPPED [ 64%]
tests\test_sage_integration.py::test_get_connections_returns_real_business_structure SKIPPED [ 64%]
tests\test_sage_integration.py::test_balance_sheet_import_uses_real_sage_api_format SKIPPED [ 64%]
tests\test_sage_integration.py::test_sage_rest_api_error_handling SKIPPED [ 65%]
tests\test_sage_integration.py::test_full_sage_oauth_flow_with_real_api SKIPPED [ 65%]
tests\test_storage_factory.py::TestStorageServiceFactory::test_factory_returns_local_storage_by_default PASSED [ 65%]
tests\test_storage_factory.py::TestStorageServiceFactory::test_factory_returns_s3_storage_when_enabled SKIPPED [ 65%]
tests\test_storage_factory.py::TestStorageServiceFactory::test_factory_returns_singleton PASSED [ 65%]
tests\test_storage_factory.py::TestStorageServiceFactory::test_local_storage_implements_protocol PASSED [ 65%]
tests\test_storage_factory.py::TestStorageServiceFactory::test_s3_storage_implements_protocol SKIPPED [ 65%]
tests\test_subscription.py::TestGetOrganizationTier::test_returns_professional_tier_when_set_in_metadata PASSED [ 65%]
tests\test_subscription.py::TestGetOrganizationTier::test_returns_premium_tier_when_set_in_metadata PASSED [ 65%]
tests\test_subscription.py::TestGetOrganizationTier::test_returns_enterprise_tier_when_set_in_metadata PASSED [ 65%]
tests\test_subscription.py::TestGetOrganizationTier::test_defaults_to_starter_when_metadata_missing PASSED [ 66%]
tests\test_subscription.py::TestGetOrganizationTier::test_defaults_to_starter_when_metadata_is_none PASSED [ 66%]
tests\test_subscription.py::TestGetOrganizationTier::test_defaults_to_starter_when_tier_value_invalid PASSED [ 66%]
tests\test_subscription.py::TestGetOrganizationTier::test_raises_clerk_api_error_when_org_not_found PASSED [ 66%]
tests\test_subscription.py::TestGetOrganizationTier::test_raises_clerk_api_error_when_network_fails PASSED [ 66%]
tests\test_subscription.py::TestGetOrganizationTier::test_caches_tier_data_for_performance PASSED [ 66%]
tests\test_subscription.py::TestGetOrganizationTier::test_cache_respects_ttl PASSED [ 66%]
tests\test_subscription.py::TestSubscriptionTierEnum::test_starter_tier_exists PASSED [ 66%]
tests\test_subscription.py::TestSubscriptionTierEnum::test_professional_tier_exists PASSED [ 66%]
tests\test_subscription.py::TestSubscriptionTierEnum::test_premium_tier_exists PASSED [ 66%]
tests\test_subscription.py::TestSubscriptionTierEnum::test_enterprise_tier_exists PASSED [ 66%]
tests\test_subscription.py::TestSubscriptionTierEnum::test_tier_comparison PASSED [ 67%]
tests\test_subscription.py::TestClerkAPIError::test_clerk_api_error_message PASSED [ 67%]
tests\test_subscription.py::TestClerkAPIError::test_clerk_api_error_with_original_exception PASSED [ 67%]
tests\test_subscription_error_paths.py::test_create_checkout_session_value_error ERROR [ 67%]
tests\test_subscription_error_paths.py::test_create_checkout_session_general_exception ERROR [ 67%]
tests\test_subscription_error_paths.py::test_get_my_subscription_not_found ERROR [ 67%]
tests\test_subscription_error_paths.py::test_billing_dashboard_no_subscription ERROR [ 67%]
tests\test_subscription_error_paths.py::test_billing_dashboard_with_subscription ERROR [ 67%]
tests\test_subscription_error_paths.py::test_billing_dashboard_zero_counts ERROR [ 67%]
tests\test_subscription_error_paths.py::test_change_tier_value_error ERROR [ 67%]
tests\test_subscription_error_paths.py::test_change_tier_general_exception ERROR [ 68%]
tests\test_subscription_error_paths.py::test_cancel_subscription_value_error ERROR [ 68%]
tests\test_subscription_error_paths.py::test_cancel_subscription_general_exception ERROR [ 68%]
tests\test_subscription_error_paths.py::test_get_all_tiers_success PASSED [ 68%]
tests\test_subscription_error_paths.py::test_stripe_webhook_missing_secret PASSED [ 68%]
tests\test_subscription_error_paths.py::test_stripe_webhook_invalid_payload SKIPPED [ 68%]
tests\test_subscription_error_paths.py::test_stripe_webhook_invalid_signature SKIPPED [ 68%]
tests\test_subscription_error_paths.py::test_stripe_webhook_successful_events SKIPPED [ 68%]
tests\test_subscription_error_paths.py::test_stripe_webhook_handler_exception_caught SKIPPED [ 68%]
tests\test_subscription_error_paths.py::test_stripe_webhook_routes_events[checkout.session.completed-handle_checkout_completed] PASSED [ 68%]
tests\test_subscription_error_paths.py::test_stripe_webhook_routes_events[invoice.paid-handle_invoice_paid] PASSED [ 69%]
tests\test_subscription_error_paths.py::test_stripe_webhook_routes_events[customer.subscription.updated-handle_subscription_updated] PASSED [ 69%]
tests\test_subscription_error_paths.py::test_stripe_webhook_routes_events[customer.subscription.deleted-handle_subscription_deleted] PASSED [ 69%]
tests\test_subscription_model.py::test_create_subscription ERROR         [ 69%]
tests\test_subscription_model.py::test_subscription_defaults ERROR       [ 69%]
tests\test_subscription_model.py::test_subscription_tier_enum_values FAILED [ 69%]
tests\test_subscription_model.py::test_subscription_status_transitions ERROR [ 69%]
tests\test_subscription_model.py::test_subscription_cancellation_scheduling ERROR [ 69%]
tests\test_subscription_model.py::test_subscription_trial_period ERROR   [ 69%]
tests\test_subscription_model.py::test_subscription_unique_per_organization ERROR [ 69%]
tests\test_subscription_model.py::test_subscription_relationship_to_organization ERROR [ 70%]
tests\test_subscription_model.py::test_create_invoice ERROR              [ 70%]
tests\test_subscription_model.py::test_invoice_statuses ERROR            [ 70%]
tests\test_subscription_model.py::test_invoice_relationship_to_subscription ERROR [ 70%]
tests\test_subscription_model.py::test_invoice_pdf_url_storage ERROR     [ 70%]
tests\test_subscription_model.py::test_subscription_cascade_delete_invoices ERROR [ 70%]
tests\test_subscription_service_edge_cases.py::test_create_checkout_session_with_invalid_tier FAILED [ 70%]
tests\test_subscription_service_edge_cases.py::test_create_checkout_session_with_missing_organization FAILED [ 70%]
tests\test_subscription_service_edge_cases.py::test_create_checkout_session_with_none_db PASSED [ 70%]
tests\test_subscription_service_edge_cases.py::test_create_checkout_session_with_annual_billing FAILED [ 70%]
tests\test_subscription_service_edge_cases.py::test_create_checkout_session_reuses_existing_customer_id FAILED [ 70%]
tests\test_subscription_service_edge_cases.py::test_create_checkout_session_with_custom_urls FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_update_subscription_tier_with_none_db PASSED [ 71%]
tests\test_subscription_service_edge_cases.py::test_update_subscription_tier_with_no_subscription FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_update_subscription_tier_with_no_stripe_subscription_id FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_update_subscription_tier_with_invalid_tier FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_update_subscription_tier_without_proration FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_update_subscription_tier_prorates_by_default FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_cancel_subscription_with_none_db PASSED [ 71%]
tests\test_subscription_service_edge_cases.py::test_cancel_subscription_with_no_subscription FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_cancel_subscription_with_no_stripe_subscription_id FAILED [ 71%]
tests\test_subscription_service_edge_cases.py::test_cancel_subscription_immediately FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_cancel_subscription_at_period_end FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_create_billing_portal_requires_db PASSED [ 72%]
tests\test_subscription_service_edge_cases.py::test_create_billing_portal_requires_active_subscription FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_create_billing_portal_requires_customer_id FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_create_billing_portal_session_success FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_handle_checkout_completed_with_no_existing_subscription FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_handle_invoice_paid_with_no_subscription FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_handle_subscription_updated_with_no_subscription FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_handle_subscription_deleted_with_no_subscription FAILED [ 72%]
tests\test_subscription_service_edge_cases.py::test_get_organization_subscription_returns_none_for_nonexistent_org FAILED [ 73%]
tests\test_subscription_service_edge_cases.py::test_tier_config_has_all_required_tiers PASSED [ 73%]
tests\test_subscription_service_edge_cases.py::test_tier_config_all_tiers_have_required_keys PASSED [ 73%]
tests\test_task_automation.py::test_enqueue_manual_rule_run_returns_when_log_missing PASSED [ 73%]
tests\test_task_automation.py::test_enqueue_manual_rule_run_marks_failed_when_rule_missing PASSED [ 73%]
tests\test_task_automation.py::test_enqueue_manual_rule_run_marks_failed_when_template_missing PASSED [ 73%]
tests\test_task_automation.py::test_enqueue_manual_rule_run_success_flow PASSED [ 73%]
tests\test_task_automation.py::test_enqueue_manual_rule_run_logs_exception_and_reraises PASSED [ 73%]
tests\test_task_crud.py::test_create_task_returns_201 ERROR              [ 73%]
tests\test_task_crud.py::test_list_tasks_scopes_to_deal ERROR            [ 73%]
tests\test_task_crud.py::test_update_task_allows_status_and_due_date_change 